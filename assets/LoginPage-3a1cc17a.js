import{p as x}from"./request-fa83aa2a.js";import{u as R}from"./user-65ba5051.js";import{m as z,r as i,T as D,U as M,u as q,o as F,b as r,d as G,e as H,j as e,Q as c,i as o,w as a,h as w,t as O,V as U,W,p as j,l as A,_ as Y}from"./index-e8fef010.js";async function J(n){return await x("/user/sendSmsCode",{phoneNumber:n})}async function K(n,l){return await x("/user/login",{loginSign:"PHONE_NUMBER_LOGIN_STRATEGY",phoneNumber:n,code:l})}async function X(){return await x("/user/userInfo")}const p=n=>(j("data-v-d13e321f"),n=n(),A(),n),Z={class:"login-page"},$={class:"shell"},ee={action:"",method:"",class:"form",id:"a-form"},te=U('<h2 class="form_title title" data-v-d13e321f>登录</h2><div class="form_icons" data-v-d13e321f><i class="iconfont icon-QQ" data-v-d13e321f></i><i class="iconfont icon-weixin" data-v-d13e321f></i><i class="iconfont icon-bilibili-line" data-v-d13e321f></i></div><span class="form_span" data-v-d13e321f>手机验证码登录</span>',3),se=U('<h2 class="form_title title" data-v-d13e321f>创建账号</h2><div class="form_icons" data-v-d13e321f><i class="iconfont icon-QQ" data-v-d13e321f></i><i class="iconfont icon-weixin" data-v-d13e321f></i><i class="iconfont icon-bilibili-line" data-v-d13e321f></i></div><span class="form_span" data-v-d13e321f>选择注册方式活电子邮箱注册</span><input type="text" class="form_input" placeholder="Name" data-v-d13e321f><input type="text" class="form_input" placeholder="Email" data-v-d13e321f><input type="text" class="form_input" placeholder="Password" data-v-d13e321f>',6),oe=p(()=>e("h2",{class:"switch_title title",style:{"letter-spacing":"0"}},"Welcome Back！",-1)),ne=p(()=>e("p",{class:"switch_description description"},"已经有账号了嘛，去登入账号来进入奇妙世界吧！！！",-1)),ae=p(()=>e("h2",{class:"switch_title title",style:{"letter-spacing":"0"}},"Hello Friend！",-1)),ie=p(()=>e("p",{class:"switch_description description"},"去注册一个账号吧，让我们一起探索奇妙的旅途！",-1)),ce=z({__name:"LoginPage",setup(n){const l=i(!1),d=i(!1),m=i(!1),h=i(!1),y=i(!1),v=i(!1),b=i(!1),t=D({phoneNumber:"",code:""}),N=R(),k=M(),V=q(),u=s=>{s.value=!s.value},S=()=>{console.log("改变"),l.value=!0,setTimeout(()=>{l.value=!1},1500),u(d),u(m),u(h),u(y)},B=async()=>{if(!t.phoneNumber)return null;v.value=!0,setTimeout(()=>{v.value=!1,b.value=!0},3e4),await J(t.phoneNumber),b.value=!0},T=async()=>{const s=await X();console.log("getUserInfo",s),N.setUserInfo(s)},L=async()=>{if(!t.phoneNumber||!t.code)return null;const s=await K(+t.phoneNumber,t.code);W.success("恭喜您登录成功"),N.setToken(s.token),V.push({path:k.query.returnUrl?k.query.returnUrl:"/"}),T()},E=s=>{s.preventDefault(),console.log("注册")};return F(()=>{}),(s,f)=>{const C=r("a-input"),_=r("a-form-item"),I=r("a-link"),P=r("a-button"),Q=r("a-form");return G(),H("div",Z,[e("div",$,[e("div",{class:c(["container","a-container",h.value?"is-txl":""]),id:"a-container"},[e("form",ee,[te,o(Q,{model:t,style:{width:"600px"},onSubmit:L},{default:a(()=>[o(_,{field:"phoneNumber"},{default:a(()=>[o(C,{modelValue:t.phoneNumber,"onUpdate:modelValue":f[0]||(f[0]=g=>t.phoneNumber=g),placeholder:"手机号",class:"form_input phoneNumber"},null,8,["modelValue"])]),_:1}),o(_,{field:"code",class:"code-item"},{default:a(()=>[o(C,{modelValue:t.code,"onUpdate:modelValue":f[1]||(f[1]=g=>t.code=g),placeholder:"验证码",class:"form_input"},null,8,["modelValue"]),o(I,{onClick:B,class:"form_link code",disabled:v.value},{default:a(()=>[w(O(b.value?"已发送":"发送验证码"),1)]),_:1},8,["disabled"])]),_:1}),o(_,null,{default:a(()=>[o(I,{href:"link",class:"form_link forget-pwd"},{default:a(()=>[w("忘记密码？")]),_:1})]),_:1}),o(_,{class:"loginItem"},{default:a(()=>[o(P,{class:"form_button button submit login","html-type":"submit"},{default:a(()=>[w("登录")]),_:1})]),_:1})]),_:1},8,["model"])])],2),e("div",{class:c(["container","b-container",h.value?"is-txl":"",y.value?"is-z":""]),id:"b-container"},[e("form",{action:"",method:"",class:"form",id:"a-form"},[se,e("button",{class:"form_button button submit",onClick:E},"注册")])],2),e("div",{class:c(["switch",l.value?"is-gx":"",d.value?"is-txr":""]),id:"switch-cnt"},[e("div",{class:c(["switch_circle",d.value?"is-txr":""])},null,2),e("div",{class:c(["switch_circle","switch_circle-t",d.value?"is-txr":""])},null,2),e("div",{class:c(["switch_container",m.value?"":"is-hidden"]),id:"switch-c2"},[oe,ne,e("button",{class:"switch_button button switch-btn",onClick:S},"登录")],2),e("div",{class:c(["switch_container",m.value?"is-hidden":""]),id:"switch-c1"},[ae,ie,e("button",{class:"switch_button button switch-btn",onClick:S},"注册")],2)],2)])])}}});const ue=Y(ce,[["__scopeId","data-v-d13e321f"]]);export{ue as default};
