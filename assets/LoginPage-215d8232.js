import{p as x}from"./request-8f607ab9.js";import{u as Q}from"./user-d6f68ddf.js";import{n as z,r as a,Y as D,O as M,u as O,o as q,b as r,d as F,e as G,j as e,v as i,i as o,w as n,h as w,t as H,Z as U,$ as Y,p as j,l as A,_ as W}from"./index-b1c04331.js";async function Z(c){return await x("/user/sendSmsCode",{phoneNumber:c})}async function $(c,l){return await x("/user/login",{loginSign:"PHONE_NUMBER_LOGIN_STRATEGY",phoneNumber:c,code:l})}async function J(){return await x("/user/userInfo")}const p=c=>(j("data-v-6d1cfecc"),c=c(),A(),c),K={class:"login-page"},X={class:"shell"},ee={action:"",method:"",class:"form",id:"a-form"},te=U('<h2 class="form_title title" data-v-6d1cfecc>登录</h2><div class="form_icons" data-v-6d1cfecc><i class="iconfont icon-QQ" data-v-6d1cfecc></i><i class="iconfont icon-weixin" data-v-6d1cfecc></i><i class="iconfont icon-bilibili-line" data-v-6d1cfecc></i></div><span class="form_span" data-v-6d1cfecc>手机验证码登录</span>',3),se=U('<h2 class="form_title title" data-v-6d1cfecc>创建账号</h2><div class="form_icons" data-v-6d1cfecc><i class="iconfont icon-QQ" data-v-6d1cfecc></i><i class="iconfont icon-weixin" data-v-6d1cfecc></i><i class="iconfont icon-bilibili-line" data-v-6d1cfecc></i></div><span class="form_span" data-v-6d1cfecc>选择注册方式活电子邮箱注册</span><input type="text" class="form_input" placeholder="Name" data-v-6d1cfecc><input type="text" class="form_input" placeholder="Email" data-v-6d1cfecc><input type="text" class="form_input" placeholder="Password" data-v-6d1cfecc>',6),oe=p(()=>e("h2",{class:"switch_title title",style:{"letter-spacing":"0"}},"Welcome Back！",-1)),ce=p(()=>e("p",{class:"switch_description description"},"已经有账号了嘛，去登入账号来进入奇妙世界吧！！！",-1)),ne=p(()=>e("h2",{class:"switch_title title",style:{"letter-spacing":"0"}},"Hello Friend！",-1)),ae=p(()=>e("p",{class:"switch_description description"},"去注册一个账号吧，让我们一起探索奇妙的旅途！",-1)),ie=z({__name:"LoginPage",setup(c){const l=a(!1),d=a(!1),m=a(!1),h=a(!1),y=a(!1),v=a(!1),b=a(!1),t=D({phoneNumber:"",code:""}),N=Q(),k=M(),V=O(),u=s=>{s.value=!s.value},S=()=>{console.log("改变"),l.value=!0,setTimeout(()=>{l.value=!1},1500),u(d),u(m),u(h),u(y)},B=async()=>{if(!t.phoneNumber)return null;v.value=!0,setTimeout(()=>{v.value=!1,b.value=!0},3e4),await Z(t.phoneNumber),b.value=!1},L=async()=>{const s=await J();console.log("getUserInfo",s),N.setUserInfo(s)},T=async()=>{if(!t.phoneNumber||!t.code)return null;const s=await $(+t.phoneNumber,t.code);Y.success("恭喜您登录成功"),N.setToken(s.token),await V.push({path:k.query.returnUrl?k.query.returnUrl:"/"}),await L()},E=s=>{s.preventDefault(),console.log("注册")};return q(()=>{}),(s,f)=>{const C=r("a-input"),_=r("a-form-item"),I=r("a-link"),P=r("a-button"),R=r("a-form");return F(),G("div",K,[e("div",X,[e("div",{class:i(["container","a-container",h.value?"is-txl":""]),id:"a-container"},[e("form",ee,[te,o(R,{model:t,style:{width:"600px"},onSubmit:T},{default:n(()=>[o(_,{field:"phoneNumber"},{default:n(()=>[o(C,{modelValue:t.phoneNumber,"onUpdate:modelValue":f[0]||(f[0]=g=>t.phoneNumber=g),placeholder:"手机号",class:"form_input phoneNumber"},null,8,["modelValue"])]),_:1}),o(_,{field:"code",class:"code-item"},{default:n(()=>[o(C,{modelValue:t.code,"onUpdate:modelValue":f[1]||(f[1]=g=>t.code=g),placeholder:"验证码",class:"form_input"},null,8,["modelValue"]),o(I,{onClick:B,class:"form_link code",disabled:v.value},{default:n(()=>[w(H(b.value?"已发送":"发送验证码"),1)]),_:1},8,["disabled"])]),_:1}),o(_,null,{default:n(()=>[o(I,{href:"link",class:"form_link forget-pwd"},{default:n(()=>[w("忘记密码？")]),_:1})]),_:1}),o(_,{class:"loginItem"},{default:n(()=>[o(P,{class:"form_button button submit login","html-type":"submit"},{default:n(()=>[w("登录")]),_:1})]),_:1})]),_:1},8,["model"])])],2),e("div",{class:i(["container","b-container",h.value?"is-txl":"",y.value?"is-z":""]),id:"b-container"},[e("form",{action:"",method:"",class:"form",id:"a-form"},[se,e("button",{class:"form_button button submit",onClick:E},"注册")])],2),e("div",{class:i(["switch",l.value?"is-gx":"",d.value?"is-txr":""]),id:"switch-cnt"},[e("div",{class:i(["switch_circle",d.value?"is-txr":""])},null,2),e("div",{class:i(["switch_circle","switch_circle-t",d.value?"is-txr":""])},null,2),e("div",{class:i(["switch_container",m.value?"":"is-hidden"]),id:"switch-c2"},[oe,ce,e("button",{class:"switch_button button switch-btn",onClick:S},"登录")],2),e("div",{class:i(["switch_container",m.value?"is-hidden":""]),id:"switch-c1"},[ne,ae,e("button",{class:"switch_button button switch-btn",onClick:S},"注册")],2)],2)])])}}});const ue=W(ie,[["__scopeId","data-v-6d1cfecc"]]);export{ue as default};
