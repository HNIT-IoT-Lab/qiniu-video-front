import{m as Q,n as $,q as L,r as v,s as st,c as z,v as at,x as lt,k as h,d as w,e as _,F as ct,f as ut,j as g,y as S,z as Z,A as dt,o as ft,B as mt,C as pt,D as gt,i as x,t as E,E as T,G as tt,p as vt,l as yt,_ as ht,H as wt,w as _t}from"./index-0864ca72.js";import{R as bt}from"./video-js-40545d33.js";import{p as At}from"./request-37a6827d.js";function Ot(t){return at()?(lt(t),!0):!1}const et=typeof window<"u";function It(t,e){function n(...o){t(()=>e.apply(this,o),{fn:e,thisArg:this,args:o})}return n}function St(t,e={}){let n,o;return s=>{const i=h(t),a=h(e.maxWait);if(n&&clearTimeout(n),i<=0||a!==void 0&&a<=0)return o&&(clearTimeout(o),o=null),s();a&&!o&&(o=setTimeout(()=>{n&&clearTimeout(n),o=null,s()},a)),n=setTimeout(()=>{o&&clearTimeout(o),o=null,s()},i)}}function xt(t,e=200,n={}){return It(St(e,n),t)}function Et(t){var e;const n=h(t);return(e=n==null?void 0:n.$el)!=null?e:n}const $t=et?window:void 0,C=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},j="__vueuse_ssr_handlers__";C[j]=C[j]||{};var B=Object.getOwnPropertySymbols,zt=Object.prototype.hasOwnProperty,Rt=Object.prototype.propertyIsEnumerable,Lt=(t,e)=>{var n={};for(var o in t)zt.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&B)for(var o of B(t))e.indexOf(o)<0&&Rt.call(t,o)&&(n[o]=t[o]);return n};function Pt(t,e,n={}){const o=n,{window:r=$t}=o,s=Lt(o,["window"]);let i;const a=r&&"ResizeObserver"in r,c=()=>{i&&(i.disconnect(),i=void 0)},l=L(()=>Et(t),d=>{c(),a&&r&&d&&(i=new ResizeObserver(e),i.observe(d,s))},{immediate:!0,flush:"post"}),f=()=>{c(),l()};return Ot(f),{isSupported:a,stop:f}}var D,N;et&&(window!=null&&window.navigator)&&((D=window==null?void 0:window.navigator)!=null&&D.platform)&&/iP(ad|hone|od)/.test((N=window==null?void 0:window.navigator)==null?void 0:N.platform);const Tt=({breakpoints:t,wrapperWidth:e,gutter:n,hasAroundGutter:o,initWidth:r})=>{const s=Object.keys(t).map(l=>Number(l)).sort((l,f)=>l-f);let i=e,a=!1;for(const l of s)if(e<=l){i=l,a=!0;break}if(!a)return r;const c=t[i].rowPerView;return o?(e-n)/c-n:(e-(c-1)*n)/c};function Ct(t){const e=v(0),n=v(null);Pt(n,i=>{const a=i[0],{width:c}=a.contentRect;e.value=c});const o=z(()=>Tt({wrapperWidth:e.value,breakpoints:t.breakpoints,gutter:t.gutter,hasAroundGutter:t.hasAroundGutter,initWidth:t.width})),r=z(()=>{const i=t.hasAroundGutter?-t.gutter:t.gutter;return Math.floor((e.value+i)/(o.value+t.gutter))}),s=z(()=>{const i=t.hasAroundGutter?t.gutter:-t.gutter,a=r.value*(o.value+t.gutter)+i;return(e.value-a)/2});return{waterfallWrapper:n,wrapperWidth:e,colWidth:o,cols:r,offsetX:s}}function nt(t,e){return new RegExp(`(^|\\s)${e}(\\s|$)`).test(t.className)}function k(t,e){if(nt(t,e))return;const n=t.className.split(/\s+/);n.push(e),t.className=n.join(" ")}const jt=document.createElement("div").style,R=(()=>{const t={webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform",standard:"transform"};for(const e in t){const n=t[e];if(jt[n]!==void 0)return e}return!1})();function I(t){return R===!1?!1:R==="standard"?t:R+t.charAt(0).toUpperCase()+t.substr(1)}const H=I("transform"),M=I("animation-duration"),V=I("animation-delay"),F=I("transition"),W=I("animation-fill-mode");function Bt(t,e,n,o,r){const s=v([]),i=v(0),a=d=>{const u=t.hasAroundGutter?d+1:d;return t.gutter*u+e.value*d+o.value},c=()=>{s.value=new Array(n.value).fill(t.hasAroundGutter?t.gutter:0)},l=Dt(t);return{wrapperHeight:i,layoutHandle:async()=>{c();const d=[];if(r&&r.value&&r.value.childNodes.forEach(u=>{u.className==="waterfall-item"&&d.push(u)}),d.length===0)return!1;for(let u=0;u<d.length;u++){const m=d[u],p=Math.min.apply(null,s.value),b=s.value.indexOf(p),y=a(b),A=m.style;H&&(A[H]=`translate3d(${y}px,${p}px, 0)`),A.width=`${e.value}px`;const{height:it}=m.getBoundingClientRect();s.value[b]+=it+t.gutter,l(m,()=>{F&&(A[F]="transform .3s")})}i.value=Math.max.apply(null,s.value)}}}function Dt(t){return(e,n)=>{const o=e.firstChild;if(o&&!nt(o,t.animationPrefix)){const r=`${t.animationDuration/1e3}s`,s=`${t.animationDelay/1e3}s`,i=o.style;i.visibility="visible",M&&(i[M]=r),V&&(i[V]=s),W&&(i[W]="both"),k(o,t.animationPrefix),k(o,t.animationEffect),n&&setTimeout(()=>{n()},t.animationDuration+t.animationDelay)}}}const Nt=typeof window<"u"&&window!==null,G=Mt(),kt=Object.prototype.propertyIsEnumerable,U=Object.getOwnPropertySymbols;function Ht(t,...e){return e.map(o=>o.replace(/\[(\w+)\]/g,".$1").split(".").reduce((r,s)=>r&&r[s],t))}function Mt(){return Nt&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?("isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get(){return this.intersectionRatio>0}}),!0):!1}function O(t){return typeof t=="function"||toString.call(t)==="[object Object]"}function Vt(t){return typeof t=="object"?t===null:typeof t!="function"}function Ft(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"}function Wt(t,...e){if(!O(t))throw new TypeError("expected the first argument to be an object");if(e.length===0||typeof Symbol!="function"||typeof U!="function")return t;for(const n of e){const o=U(n);for(const r of o)kt.call(n,r)&&(t[r]=n[r])}return t}function ot(t,...e){let n=0;for(Vt(t)&&(t=e[n++]),t||(t={});n<e.length;n++)if(O(e[n])){for(const o of Object.keys(e[n]))Ft(o)&&(O(t[o])&&O(e[n][o])?ot(t[o],e[n][o]):t[o]=e[n][o]);Wt(t,e[n])}return t}function K(t,e){return new Promise((n,o)=>{const r=new Image;r.onload=()=>{n(r)},r.onerror=()=>{o(new Error("Image load error"))},e&&(r.crossOrigin="Anonymous"),r.src=t})}const Gt={rootMargin:"0px",threshold:0},X="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Ut="";class Kt{constructor(e=!0,n,o=!0){this.lazyActive=!0,this.crossOrigin=!0,this.options={loading:X,error:Ut,observerOptions:Gt,log:!0},this._images=new WeakMap,this.lazyActive=e,this.crossOrigin=o,this.config(n)}config(e={}){ot(this.options,e)}mount(e,n,o){const{src:r,loading:s,error:i}=this._valueFormatter(n);e.setAttribute("lazy","loading"),e.setAttribute("src",s||X),this.lazyActive?(G||(this._setImageSrc(e,r,o,i),this._log(()=>{throw new Error("Not support IntersectionObserver!")})),this._initIntersectionObserver(e,r,o,i)):this._setImageSrc(e,r,o,i)}resize(e,n){const o=e.getAttribute("lazy"),r=e.getAttribute("src");o&&o==="loaded"&&r&&K(r,this.crossOrigin).then(s=>{const{width:i,height:a}=s,c=e.width/i*a;e.height=c;const l=e.style;l.height=`${c}px`,n()})}unmount(e){const n=this._realObserver(e);n&&n.unobserve(e),this._images.delete(e)}_setImageSrc(e,n,o,r){!n||e.getAttribute("src")===n||K(n,this.crossOrigin).then(i=>{const{width:a,height:c}=i,l=c/a,f=e.parentNode.parentNode;f.style.paddingBottom=`${l*100}%`,e.setAttribute("lazy","loaded"),e.removeAttribute("src"),e.setAttribute("src",n),o(!0)}).catch(()=>{const i=this._realObserver(e);i&&i.disconnect(),r&&(e.setAttribute("lazy","error"),e.setAttribute("src",r),o(!1)),this._log(()=>{throw new Error(`Image failed to load!And failed src was: ${n} `)})})}_isOpenLazy(){return G&&this.lazyActive}_initIntersectionObserver(e,n,o,r){const s=this.options.observerOptions;this._images.set(e,new IntersectionObserver(a=>{Array.prototype.forEach.call(a,c=>{if(c.isIntersecting){const l=this._realObserver(e);l&&l.unobserve(c.target),this._setImageSrc(e,n,o,r)}})},s));const i=this._realObserver(e);i&&i.observe(e)}_valueFormatter(e){let n=e,o=this.options.loading,r=this.options.error;return O(e)&&(n=e.src,o=e.loading||this.options.loading,r=e.error||this.options.error),{src:n,loading:o,error:r}}_log(e){this.options.log&&e()}_realObserver(e){return this._images.get(e)}}var Xt=(t,e)=>{const n=t.__vccOpts||t;for(const[o,r]of e)n[o]=r;return n};const P=Q({props:{list:{type:Array,default:()=>[]},rowKey:{type:String,default:"id"},imgSelector:{type:String,default:"src"},width:{type:Number,default:200},breakpoints:{type:Object,default:()=>({1200:{rowPerView:3},800:{rowPerView:2},500:{rowPerView:1}})},gutter:{type:Number,default:10},hasAroundGutter:{type:Boolean,default:!0},animationPrefix:{type:String,default:"animate__animated"},animationEffect:{type:String,default:"fadeIn"},animationDuration:{type:Number,default:1e3},animationDelay:{type:Number,default:300},backgroundColor:{type:String,default:"#fff"},lazyload:{type:Boolean,default:!0},loadProps:{type:Object,default:()=>{}},crossOrigin:{type:Boolean,default:!0},delay:{type:Number,default:300}},setup(t){const e=new Kt(t.lazyload,t.loadProps,t.crossOrigin);$("lazy",e);const{waterfallWrapper:n,wrapperWidth:o,colWidth:r,cols:s,offsetX:i}=Ct(t),{wrapperHeight:a,layoutHandle:c}=Bt(t,r,s,i,n),l=xt(()=>{c()},t.delay);L(()=>[o,r,t.list],()=>{o.value>0&&l()},{deep:!0});const f=v(0);return $("sizeChangeTime",f),$("imgLoaded",l),{waterfallWrapper:n,wrapperHeight:a,getRenderURL:m=>Ht(m,t.imgSelector)[0],getKey:(m,p)=>m[t.rowKey]||p,renderer:l}}}),Y=()=>{st(t=>({"1d5a2b91":t.backgroundColor}))},q=P.setup;P.setup=q?(t,e)=>(Y(),q(t,e)):Y;const Yt=P,qt={class:"waterfall-card"};function Jt(t,e,n,o,r,s){return w(),_("div",{ref:"waterfallWrapper",class:"waterfall-list",style:Z({height:`${t.wrapperHeight}px`})},[(w(!0),_(ct,null,ut(t.list,(i,a)=>(w(),_("div",{key:t.getKey(i,a),class:"waterfall-item"},[g("div",qt,[S(t.$slots,"item",{item:i,index:a,url:t.getRenderURL(i)},void 0,!0)])]))),128))],4)}var Qt=Xt(Yt,[["render",Jt],["__scopeId","data-v-2465a0ec"]]);function Zt(t,e){const n=t.getBoundingClientRect();if(!e)return n.top>=0&&n.bottom<=window.innerHeight;const o=e.getBoundingClientRect();return n.top>=o.top&&n.bottom<=o.bottom}async function te(t){return await tt(),t.value instanceof HTMLElement?t.value:t.value?document.querySelector(t.value):null}function J(t){let e=`0px 0px ${t.distance}px 0px`;t.top&&(e=`${t.distance}px 0px 0px 0px`);const n=new IntersectionObserver(o=>{o[0].isIntersecting&&(t.firstload&&t.emit(),t.firstload=!0)},{root:t.parentEl,rootMargin:e});return n.observe(t.infiniteLoading.value),n}const rt=(t,e)=>{const n=t.__vccOpts||t;for(const[o,r]of e)n[o]=r;return n},ee={},ne=t=>(vt("data-v-d3e37633"),t=t(),yt(),t),oe={class:"container"},re=ne(()=>g("div",{class:"spinner"},null,-1)),ie=[re];function se(t,e){return w(),_("div",oe,ie)}const ae=rt(ee,[["render",se],["__scopeId","data-v-d3e37633"]]),le={class:"state-error"},ce=Q({__name:"InfiniteLoading",props:{top:{type:Boolean,default:!1},target:{},distance:{default:0},identifier:{},firstload:{type:Boolean,default:!0},slots:{}},emits:["infinite"],setup(t,{emit:e}){const n=t;let o=null,r=0;const s=v(null),i=v(""),{top:a,firstload:c,distance:l}=n,{identifier:f,target:d}=dt(n),u={infiniteLoading:s,top:a,firstload:c,distance:l,parentEl:null,emit(){r=(u.parentEl||document.documentElement).scrollHeight,m.loading(),e("infinite",m)}},m={loading(){i.value="loading"},async loaded(){i.value="loaded";const p=u.parentEl||document.documentElement;await tt(),a&&(p.scrollTop=p.scrollHeight-r),Zt(s.value,u.parentEl)&&u.emit()},complete(){i.value="complete",o==null||o.disconnect()},error(){i.value="error"}};return L(f,()=>{o==null||o.disconnect(),o=J(u)}),ft(async()=>{u.parentEl=await te(d),o=J(u)}),mt(()=>{o==null||o.disconnect()}),(p,b)=>(w(),_("div",{ref_key:"infiniteLoading",ref:s,style:{"min-height":"1px"}},[pt(g("div",null,[S(p.$slots,"spinner",{},()=>[x(ae)],!0)],512),[[gt,i.value=="loading"]]),i.value=="complete"?S(p.$slots,"complete",{key:0},()=>{var y;return[g("span",null,E(((y=p.slots)==null?void 0:y.complete)||"No more results!"),1)]},!0):T("",!0),i.value=="error"?S(p.$slots,"error",{key:1,retry:u.emit},()=>{var y;return[g("span",le,[g("span",null,E(((y=p.slots)==null?void 0:y.error)||"Oops something went wrong!"),1),g("button",{class:"retry",onClick:b[0]||(b[0]=(...A)=>u.emit&&u.emit(...A))},"retry")])]},!0):T("",!0)],512))}}),ue=rt(ce,[["__scopeId","data-v-a7077831"]]);async function de(t,e){return await At("/article/getArticleList",{currentPage:t,pageSize:e})}const fe={class:"home-page"},me={class:"text",style:{height:"100px","padding-left":"20px"}},pe={style:{"margin-top":"20px",color:"#999"}},ge=10,ve={__name:"HomePage",setup(t){const e=v([]),n=v(300),o=v(500);wt([]);const r=v(1),s=async l=>{const f=await de(l,ge);e.value=[...e.value,...f.result],console.log("contentList.value",e.value)};s(r.value);const i=async l=>{console.log("底部"),r.value=r.value+1,s(r.value)},a=async l=>{},c=()=>{};return(l,f)=>(w(),_("div",fe,[x(h(Qt),{list:e.value,width:370,style:{}},{item:_t(({item:d,url:u,index:m})=>[g("div",{class:"card",style:Z([{height:m%2===0?`${n.value}px`:`${o.value}px`},{"background-color":"#dfecf9","border-radius":"14px"}])},[g("div",null,[x(h(bt),{ref:"videoRef",src:d.urlList[0],width:370,height:(m%2===0?n.value:o.value)-100,poster:d.poster,controls:"",muted:"",loop:!0,volume:.6,onMouseover:p=>a(m),onMouseleave:c},null,8,["src","height","poster","onMouseover"])]),g("div",me,[g("h3",null,E(d.title),1),g("p",pe,E(d.content),1)])],4)]),_:1},8,["list"]),x(h(ue),{onInfinite:i,style:{display:"flex","justify-content":"center"}})]))}},_e=ht(ve,[["__scopeId","data-v-c935c54a"]]);export{_e as default};
