import{W as F}from"./style-4361d689.js";import{R as D}from"./video-js-08b2bd83.js";import{m as E,n as b,q as M,c as $,s as O,d as f,e as v,v as P,x as h,j as r,r as m,y as V,z as Z,o as G,A as U,B as J,C as K,D as j,i as k,t as _,E as W,G as q,p as Q,l as X,_ as Y,H as ee,w as te,k as g,I as ne}from"./index-7130a7ff.js";import{p as oe,g as se}from"./request-bc1eb332.js";const le=b({name:"IconHeartFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const n=M("icon"),s=$(()=>[n,`${n}-heart-fill`,{[`${n}-spin`]:e.spin}]),i=$(()=>{const o={};return e.size&&(o.fontSize=O(e.size)?`${e.size}px`:e.size),e.rotate&&(o.transform=`rotate(${e.rotate}deg)`),o});return{cls:s,innerStyle:i,onClick:o=>{t("click",o)}}}}),re=["stroke-width","stroke-linecap","stroke-linejoin"],ie=r("path",{d:"M24 10.541c4.35-4.522 11.405-4.814 15.756-.292 4.35 4.522 4.15 11.365.448 17.135C36.153 33.7 28 41.5 24 42c-4-.5-12.152-8.3-16.204-14.616-3.702-5.77-3.902-12.613.448-17.135C12.595 5.727 19.65 6.019 24 10.54Z",fill:"currentColor",stroke:"none"},null,-1),ae=[ie];function ce(e,t,n,s,i,u){return f(),v("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:P(e.cls),style:h(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...o)=>e.onClick&&e.onClick(...o))},ae,14,re)}var H=E(le,[["render",ce]]);const ue=Object.assign(H,{install:(e,t)=>{var n;const s=(n=t==null?void 0:t.iconPrefix)!=null?n:"";e.component(s+H.name,H)}}),de=b({name:"IconHeart",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const n=M("icon"),s=$(()=>[n,`${n}-heart`,{[`${n}-spin`]:e.spin}]),i=$(()=>{const o={};return e.size&&(o.fontSize=O(e.size)?`${e.size}px`:e.size),e.rotate&&(o.transform=`rotate(${e.rotate}deg)`),o});return{cls:s,innerStyle:i,onClick:o=>{t("click",o)}}}}),pe=["stroke-width","stroke-linecap","stroke-linejoin"],fe=r("path",{d:"M38.083 12.912a9.929 9.929 0 0 1 .177 13.878l-.177.18L25.76 39.273c-.972.97-2.548.97-3.52 0L9.917 26.971l-.177-.181a9.929 9.929 0 0 1 .177-13.878c3.889-3.883 10.194-3.883 14.083 0 3.889-3.883 10.194-3.883 14.083 0Z"},null,-1),ve=[fe];function ke(e,t,n,s,i,u){return f(),v("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:P(e.cls),style:h(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...o)=>e.onClick&&e.onClick(...o))},ve,14,pe)}var N=E(de,[["render",ke]]);const ge=Object.assign(N,{install:(e,t)=>{var n;const s=(n=t==null?void 0:t.iconPrefix)!=null?n:"";e.component(s+N.name,N)}}),me=b({name:"IconStar",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const n=M("icon"),s=$(()=>[n,`${n}-star`,{[`${n}-spin`]:e.spin}]),i=$(()=>{const o={};return e.size&&(o.fontSize=O(e.size)?`${e.size}px`:e.size),e.rotate&&(o.transform=`rotate(${e.rotate}deg)`),o});return{cls:s,innerStyle:i,onClick:o=>{t("click",o)}}}}),ye=["stroke-width","stroke-linecap","stroke-linejoin"],_e=r("path",{d:"M22.552 6.908a.5.5 0 0 1 .896 0l5.02 10.17a.5.5 0 0 0 .376.274l11.224 1.631a.5.5 0 0 1 .277.853l-8.122 7.916a.5.5 0 0 0-.143.443l1.917 11.178a.5.5 0 0 1-.726.527l-10.038-5.278a.5.5 0 0 0-.466 0L12.73 39.9a.5.5 0 0 1-.726-.527l1.918-11.178a.5.5 0 0 0-.144-.443l-8.122-7.916a.5.5 0 0 1 .278-.853l11.223-1.63a.5.5 0 0 0 .376-.274l5.02-10.17Z"},null,-1),he=[_e];function $e(e,t,n,s,i,u){return f(),v("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:P(e.cls),style:h(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...o)=>e.onClick&&e.onClick(...o))},he,14,ye)}var B=E(me,[["render",$e]]);const Ce=Object.assign(B,{install:(e,t)=>{var n;const s=(n=t==null?void 0:t.iconPrefix)!=null?n:"";e.component(s+B.name,B)}});function we(e,t){const n=e.getBoundingClientRect();if(!t)return n.top>=0&&n.bottom<=window.innerHeight;const s=t.getBoundingClientRect();return n.top>=s.top&&n.bottom<=s.bottom}async function Se(e){return await q(),e.value instanceof HTMLElement?e.value:e.value?document.querySelector(e.value):null}function R(e){let t=`0px 0px ${e.distance}px 0px`;e.top&&(t=`${e.distance}px 0px 0px 0px`);const n=new IntersectionObserver(s=>{s[0].isIntersecting&&(e.firstload&&e.emit(),e.firstload=!0)},{root:e.parentEl,rootMargin:t});return n.observe(e.infiniteLoading.value),n}const A=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n},be={},Le=e=>(Q("data-v-d3e37633"),e=e(),X(),e),xe={class:"container"},ze=Le(()=>r("div",{class:"spinner"},null,-1)),Ie=[ze];function je(e,t){return f(),v("div",xe,Ie)}const He=A(be,[["render",je],["__scopeId","data-v-d3e37633"]]),Ne={class:"state-error"},Be=b({__name:"InfiniteLoading",props:{top:{type:Boolean,default:!1},target:{},distance:{default:0},identifier:{},firstload:{type:Boolean,default:!0},slots:{}},emits:["infinite"],setup(e,{emit:t}){const n=e;let s=null,i=0;const u=m(null),o=m(""),{top:C,firstload:y,distance:L}=n,{identifier:x,target:z}=V(n),d={infiniteLoading:u,top:C,firstload:y,distance:L,parentEl:null,emit(){i=(d.parentEl||document.documentElement).scrollHeight,w.loading(),t("infinite",w)}},w={loading(){o.value="loading"},async loaded(){o.value="loaded";const p=d.parentEl||document.documentElement;await q(),C&&(p.scrollTop=p.scrollHeight-i),we(u.value,d.parentEl)&&d.emit()},complete(){o.value="complete",s==null||s.disconnect()},error(){o.value="error"}};return Z(x,()=>{s==null||s.disconnect(),s=R(d)}),G(async()=>{d.parentEl=await Se(z),s=R(d)}),U(()=>{s==null||s.disconnect()}),(p,a)=>(f(),v("div",{ref_key:"infiniteLoading",ref:u,style:{"min-height":"1px"}},[J(r("div",null,[j(p.$slots,"spinner",{},()=>[k(He)],!0)],512),[[K,o.value=="loading"]]),o.value=="complete"?j(p.$slots,"complete",{key:0},()=>{var c;return[r("span",null,_(((c=p.slots)==null?void 0:c.complete)||"No more results!"),1)]},!0):W("",!0),o.value=="error"?j(p.$slots,"error",{key:1,retry:d.emit},()=>{var c;return[r("span",Ne,[r("span",null,_(((c=p.slots)==null?void 0:c.error)||"Oops something went wrong!"),1),r("button",{class:"retry",onClick:a[0]||(a[0]=(...l)=>d.emit&&d.emit(...l))},"retry")])]},!0):W("",!0)],512))}}),Ee=A(Be,[["__scopeId","data-v-a7077831"]]);async function Me(e,t){return await oe("/article/getArticleList",{currentPage:e,pageSize:t})}async function T(e,t,n){return await se("/article/starOrCollectArticle",{articleId:e,type:t,isok:n})}const Oe={class:"home-page"},Pe={class:"text",style:{position:"relative",height:"100px","padding-left":"20px"}},We={style:{color:"#999"}},Re={class:"likeAndCollect",style:{position:"absolute",left:"18px",top:"44px",color:"#666","font-size":"14px"}},Te=["onClick"],qe={key:0},Ae={key:1},Fe={class:"count",style:{"margin-left":"2px"}},De=["onClick"],Ve={key:0},Ze={key:1},Ge={class:"count",style:{"margin-left":"2px"}},Ue=10,Je={__name:"HomePage",setup(e){const t=m([]),n=m(300),s=m(300);let i="";const u=ee([]),o=m(1),C=m(""),y=async a=>{const c=await Me(a,Ue);t.value=[...t.value,...c.result],console.log("contentList.value",t.value)};y(o.value);const L=async a=>{u.value.push(a.player)},x=async a=>{console.log("底部"),o.value=o.value+1,y(o.value)},z=a=>{i=setTimeout(()=>{u.value[a].play(),console.log("222",222)},1500)},d=a=>{u.value[a].pause(),clearTimeout(i)},w=async(a,c)=>{c=!c;const l=await T(a,"COLLECTION",c);console.log("res",l),y()},p=async(a,c)=>{c=!c;const l=await T(a,"COLLECTION",c);console.log("res",l),y()};return(a,c)=>(f(),v("div",Oe,[k(g(F),{list:t.value,width:370,style:{}},{item:te(({item:l,url:Ke,index:S})=>[r("div",{class:"card",style:h([{height:S%2===0?`${n.value}px`:`${s.value}px`},{"background-color":"#dfecf9","border-radius":"14px"}])},[r("div",null,[k(g(D),{ref_key:"videoRef",ref:C,src:l.urlList[0],width:370,height:(S%2===0?n.value:s.value)-100,poster:l.poster,controls:"",loop:!0,volume:.6,onMounted:L,onMouseenter:I=>z(S),onMouseleave:I=>d(S)},null,8,["src","height","poster","onMouseenter","onMouseleave"])]),r("div",Pe,[r("h3",null,_(l.title),1),r("p",We,_(l.content),1),r("p",Re,[r("span",{class:"action",key:"heart",onClick:I=>w(l.id,l==null?void 0:l.islike)},[l!=null&&l.islike?(f(),v("span",qe,[k(g(ue),{style:{fontSize:20,color:"#f53f3f"}})])):(f(),v("span",Ae,[k(g(ge),{style:{fontSize:20,color:"#999"}})])),r("span",Fe,_(l.likeCounts),1)],8,Te),r("span",{class:"action",key:"star",onClick:I=>p(l.id,l==null?void 0:l.isCollect)},[l!=null&&l.isCollect?(f(),v("span",Ve,[k(g(ne),{style:h({marginLeft:8,fontSize:20,transform:"scale(1.1)",color:"#ffb400"})},null,8,["style"])])):(f(),v("span",Ze,[k(g(Ce),{style:h({marginLeft:8,fontSize:18,transform:"scale(1.1)",color:"#999"})},null,8,["style"])])),r("span",Ge,_(l.collectionCounts),1)],8,De)])])],4)]),_:1},8,["list"]),k(g(Ee),{onInfinite:x,style:{display:"flex","justify-content":"center"}})]))}},tt=Y(Je,[["__scopeId","data-v-b4a400f0"]]);export{tt as default};
